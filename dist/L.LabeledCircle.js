(function(t){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=t()}else if(typeof define==="function"&&define.amd){define([],t)}else{var i;if(typeof window!=="undefined"){i=window}else if(typeof global!=="undefined"){i=global}else if(typeof self!=="undefined"){i=self}else{i=this}(i.L||(i.L={})).LabeledCircleMarker=t()}})(function(){var t,i,e;return function n(t,i,e){function r(o,s){if(!i[o]){if(!t[o]){var h=typeof require=="function"&&require;if(!s&&h)return h(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var _=i[o]={exports:{}};t[o][0].call(_.exports,function(i){var e=t[o][1][i];return r(e?e:i)},_,_.exports,n,t,i,e)}return i[o].exports}var a=typeof require=="function"&&require;for(var o=0;o<e.length;o++)r(e[o]);return r}({1:[function(t,i,e){"use strict";/**
 * Leaflet SVG circle marker with detachable and draggable label and text
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
i.exports=t("./src/marker")},{"./src/marker":7}],2:[function(t,i,e){t("./src/Path.Transform");t("./src/Path.Drag");t("./src/MultiPoly.Drag");i.exports=L.Path.Drag},{"./src/MultiPoly.Drag":3,"./src/Path.Drag":4,"./src/Path.Transform":5}],3:[function(t,i,e){(function(){L.FeatureGroup.EVENTS+=" dragstart";function t(t,i,e){for(var n=0,r=t.length;n<r;n++){var a=t[n];a.prototype["_"+i]=a.prototype[i];a.prototype[i]=e}}function i(t){if(this.hasLayer(t)){return this}t.on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this);return this._addLayer.call(this,t)}function e(t){if(!this.hasLayer(t)){return this}t.off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this);return this._removeLayer.call(this,t)}t([L.MultiPolygon,L.MultiPolyline],"addLayer",i);t([L.MultiPolygon,L.MultiPolyline],"removeLayer",e);var n={_onDrag:function(t){var i=t.target;this.eachLayer(function(t){if(t!==i){t._applyTransform(i.dragging._matrix)}});this._propagateEvent(t)},_onDragEnd:function(t){var i=t.target;this.eachLayer(function(t){if(t!==i){t._resetTransform();t.dragging._transformPoints(i.dragging._matrix)}});this._propagateEvent(t)}};L.MultiPolygon.include(n);L.MultiPolyline.include(n)})()},{}],4:[function(t,i,e){/**
 * Leaflet vector features drag functionality
 * @preserve
 */
"use strict";L.Handler.PathDrag=L.Handler.extend({statics:{DRAGGABLE_CLS:"leaflet-path-draggable"},initialize:function(t){this._path=t;this._matrix=null;this._startPoint=null;this._dragStartPoint=null;this._dragInProgress=false;this._dragMoved=false},addHooks:function(){var t=L.Handler.PathDrag.DRAGGABLE_CLS;var i=this._path._path;this._path.on("mousedown",this._onDragStart,this);this._path.options.className=(this._path.options.className||"")+" "+t;if(!L.Path.CANVAS&&i){L.DomUtil.addClass(i,t)}},removeHooks:function(){var t=L.Handler.PathDrag.DRAGGABLE_CLS;var i=this._path._path;this._path.off("mousedown",this._onDragStart,this);this._path.options.className=(this._path.options.className||"").replace(t,"");if(!L.Path.CANVAS&&i){L.DomUtil.removeClass(i,t)}this._dragMoved=false},moved:function(){return this._dragMoved},inProgress:function(){return this._dragInProgress},_onDragStart:function(t){this._dragInProgress=true;this._startPoint=t.containerPoint.clone();this._dragStartPoint=t.containerPoint.clone();this._matrix=[1,0,0,1,0,0];if(this._path._point){this._point=this._path._point.clone()}this._path._map.on("mousemove",this._onDrag,this).on("mouseup",this._onDragEnd,this);this._dragMoved=false;this._replaceCoordGetters()},_onDrag:function(t){var i=t.containerPoint.x;var e=t.containerPoint.y;var n=this._matrix;var r=this._path;var a=this._startPoint;var o=i-a.x;var s=e-a.y;if(!this._dragMoved&&(o||s)){this._dragMoved=true;r.fire("dragstart");if(r._popup){r._popup._close();r.off("click",r._openPopup,r)}}n[4]+=o;n[5]+=s;a.x=i;a.y=e;r._applyTransform(n);if(r._point){r._point.x=this._point.x+n[4];r._point.y=this._point.y+n[5]}r.fire("drag");L.DomEvent.stop(t.originalEvent)},_onDragEnd:function(t){L.DomEvent.stop(t);L.DomEvent._fakeStop({type:"click"});this._dragInProgress=false;this._path._resetTransform();this._transformPoints(this._matrix);this._path._map.off("mousemove",this._onDrag,this).off("mouseup",this._onDragEnd,this);this._restoreCoordGetters();this._path.fire("dragend",{distance:Math.sqrt(L.LineUtil._sqDist(this._dragStartPoint,t.containerPoint))});if(this._path._popup){L.Util.requestAnimFrame(function(){this._path.on("click",this._path._openPopup,this._path)},this)}this._matrix=null;this._startPoint=null;this._point=null;this._dragStartPoint=null},_transformPoint:function(t,i){var e=this._path;var n=L.point(i[4],i[5]);var r=e._map.options.crs;var a=r.transformation;var o=r.scale(e._map.getZoom());var s=r.projection;var h=a.untransform(n,o).subtract(a.untransform(L.point(0,0),o));return s.unproject(s.project(t)._add(h))},_transformPoints:function(t){var i=this._path;var e,n,r;var a=L.point(t[4],t[5]);var o=i._map.options.crs;var s=o.transformation;var h=o.scale(i._map.getZoom());var l=o.projection;var _=s.untransform(a,h).subtract(s.untransform(L.point(0,0),h));if(i._point){i._latlng=l.unproject(l.project(i._latlng)._add(_));i._point=this._point._add(a)}else if(i._originalPoints){for(e=0,n=i._originalPoints.length;e<n;e++){r=i._latlngs[e];i._latlngs[e]=l.unproject(l.project(r)._add(_));i._originalPoints[e]._add(a)}}if(i._holes){for(e=0,n=i._holes.length;e<n;e++){for(var p=0,f=i._holes[e].length;p<f;p++){r=i._holes[e][p];i._holes[e][p]=l.unproject(l.project(r)._add(_));i._holePoints[e][p]._add(a)}}}i._updatePath()},_replaceCoordGetters:function(){if(this._path.getLatLng){this._path.getLatLng_=this._path.getLatLng;this._path.getLatLng=L.Util.bind(function(){return this.dragging._transformPoint(this._latlng,this.dragging._matrix)},this._path)}else if(this._path.getLatLngs){this._path.getLatLngs_=this._path.getLatLngs;this._path.getLatLngs=L.Util.bind(function(){var t=this.dragging._matrix;var i=this._latlngs;for(var e=0,n=i.length;e<n;e++){i[e]=this.dragging._transformPoint(i[e],t)}return i},this._path)}},_restoreCoordGetters:function(){if(this._path.getLatLng_){this._path.getLatLng=this._path.getLatLng_;delete this._path.getLatLng_}else if(this._path.getLatLngs_){this._path.getLatLngs=this._path.getLatLngs_;delete this._path.getLatLngs_}}});L.Path.addInitHook(function(){if(this.options.draggable){if(this.dragging){this.dragging.enable()}else{this.dragging=new L.Handler.PathDrag(this);this.dragging.enable()}}else if(this.dragging){this.dragging.disable()}})},{}],5:[function(t,i,e){"use strict";if(L.Browser.svg){L.Path.include({_resetTransform:function(){this._container.setAttributeNS(null,"transform","")},_applyTransform:function(t){this._container.setAttributeNS(null,"transform","matrix("+t.join(" ")+")")}})}else{L.Path.include({_resetTransform:function(){if(this._skew){this._skew.on=false;this._container.removeChild(this._skew);this._skew=null}},_applyTransform:function(t){var i=this._skew;if(!i){i=this._createElement("skew");this._container.appendChild(i);i.style.behavior="url(#default#VML)";this._skew=i}var e=t[0].toFixed(8)+" "+t[1].toFixed(8)+" "+t[2].toFixed(8)+" "+t[3].toFixed(8)+" 0 0";var n=Math.floor(t[4]).toFixed()+", "+Math.floor(t[5]).toFixed()+"";var r=this._container.style;var a=parseFloat(r.left);var o=parseFloat(r.top);var s=parseFloat(r.width);var h=parseFloat(r.height);if(isNaN(a))a=0;if(isNaN(o))o=0;if(isNaN(s)||!s)s=1;if(isNaN(h)||!h)h=1;var l=(-a/s-.5).toFixed(8)+" "+(-o/h-.5).toFixed(8);i.on="f";i.matrix=e;i.origin=l;i.offset=n;i.on=true}})}L.Path.include({_onMouseClick:function(t){if(this.dragging&&this.dragging.moved()||this._map.dragging&&this._map.dragging.moved()){return}this._fireMouseEvent(t)}})},{}],6:[function(t,i,e){(function(t){"use strict";var e=typeof window!=="undefined"?window["L"]:typeof t!=="undefined"?t["L"]:null;i.exports=e.CircleMarker.extend({options:{textStyle:{color:"#fff",fontSize:12},shiftY:6},initialize:function n(t,i,r){this._text=t;e.CircleMarker.prototype.initialize.call(this,i,r)},setText:function r(t){this._text=t;if(this._textNode){this._textElement.removeChild(this._textNode)}this._textNode=document.createTextNode(this._text);this._textElement.appendChild(this._textNode);return this},_initPath:function a(){e.CircleMarker.prototype._initPath.call(this);this._textElement=this._createElement("text");this.setText(this._text);this._container.appendChild(this._textElement)},_updatePath:function o(){e.CircleMarker.prototype._updatePath.call(this);this._updateTextPosition()},onAdd:function s(t){e.CircleMarker.prototype.onAdd.call(this,t);this._updateTextPosition();return this},_updateTextPosition:function h(){var t=this._textElement;var i=t.getBBox();var n=this._point.subtract(e.point(i.width,-i.height+this.options.shiftY).divideBy(2));t.setAttribute("x",n.x);t.setAttribute("y",n.y)},_updateStyle:function l(){e.CircleMarker.prototype._updateStyle.call(this);var t=this.options.textStyle;for(var i in t){if(t.hasOwnProperty(i)){var n=i;if(i==="color"){n="stroke"}this._textElement.style[n]=t[i]}}}})}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],7:[function(t,i,e){(function(e){"use strict";var n=typeof window!=="undefined"?window["L"]:typeof e!=="undefined"?e["L"]:null;var r=t("./circle");t("leaflet-path-drag");var a=n.FeatureGroup.extend({options:{getLabelText:function o(t,i){return i.properties.text},getLabelPosition:function s(t,i,e){return i.properties.labelPosition?n.latLng(i.properties.labelPosition.slice().reverse()):e},labelPositionKey:"labelPosition",markerOptions:{color:"#f00",fillOpacity:.8,draggable:true,radius:15},anchorOptions:{color:"#00f",radius:3},lineOptions:{color:"#f00",dashArray:[5,15],lineCap:"square"}},initialize:function h(t,i,e){n.Util.setOptions(this,e);this.feature=i||{type:"Feature",properties:{},geometry:{type:"Point"}};this._latlng=t;this._marker=null;this._anchor=null;this._line=null;this._createLayers();n.LayerGroup.prototype.initialize.call(this,[this._anchor,this._line,this._marker])},getLabelPosition:function l(){return this._marker.getLatLng()},getLatLng:function _(){return this._latlng},toGeoJSON:function p(){var t=n.GeoJSON.getFeature(this,{type:"Point",coordinates:n.GeoJSON.latLngToCoords(this._anchor.getLatLng())});t.properties[this.options.labelPositionKey]=n.GeoJSON.latLngToCoords(this._marker.getLatLng());return t},setText:function f(t){this._marker.setText(t);return this},_createLayers:function g(){var t=this.options;var i=t.getLabelPosition(this,this.feature,this._latlng);var e=t.getLabelText(this,this.feature);this._marker=new r(e,i,n.Util.extend({},a.prototype.options.markerOptions,t.markerOptions)).on("drag",this._onMarkerDrag,this);this._anchor=new n.CircleMarker(this._latlng,n.Util.extend({},a.prototype.options.anchorOptions,t.anchorOptions));this._line=new n.Polyline([this._latlng,this._marker.getLatLng()],n.Util.extend({},a.prototype.options.lineOptions,t.lineOptions))},_onMarkerDrag:function d(t){this._line.setLatLngs([t.target.getLatLng(),this._latlng])}});i.exports=n.LabeledCircleMarker=a;n.labeledCircleMarker=function(t,i,e){return new a(t,i,e)}}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./circle":6,"leaflet-path-drag":2}]},{},[1])(1)});